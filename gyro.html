<html>
<head>
<style>
.garden {
  position: relative;
  width : 100vw;
  height: 100vh;
  border: 5px solid #CCC;
  border-radius: 10px;
}

.ball {
  position: absolute;
  top   : 90px;
  left  : 90px;
  width : 20px;
  height: 20px;
  background: green;
  border-radius: 100%;
}
</style>
</head>
<body>
<div class="garden">
  <div class="ball"></div>
</div>

<pre class="output"></pre>
<script>
var oldY = 0;

function initialGamma(event) {
  oldY = event.alpha;
  oldY *= -1;
  if (oldY < 0) {
	oldY += 360;
  }
  window.removeEventListener('deviceorientation', initialGamma);
}
window.addEventListener('deviceorientation', initialGamma);

var ball   = document.querySelector('.ball');
var garden = document.querySelector('.garden');
var output = document.querySelector('.output');

var maxX = garden.clientWidth  - ball.clientWidth;
var maxY = garden.clientHeight - ball.clientHeight;

var angle = -40;
var dot = 0;
var dotAngle = -40;
var angleChange = 0;
var newY = 0;

function handleOrientation(event) {
	newY = event.alpha;
	newY *= -1;
	if (newY < 0) {
		newY += 360;
	}
	
	angleChange = oldY - newY;
	
	if (newY > oldY) {
		dotAngle -=  angleChange * -1;
	} else if (newY < oldY) {
		dotAngle += angleChange;
	}
	
	if (0 < dotAngle < 50) {
		dot = 2280-(((51-dotAngle)/50)*1140);
	} else if (360 > dotAngle > 310) {
		dot = (51-((360-dotAngle)/50))*1140;
	} else if (50 < dotAngle < 180) {
		dot = 2280;
	} else if (310 > dotAngle > 181) {
		dot = 0;
	}
	
	output.innerHTML = "newy: " + newY + "dota: " + dotAngle

	
	
	
	
	ball.style.left = dot;
	
	oldY = newY;
}

window.addEventListener('deviceorientation', handleOrientation);
</script>
</body>
</html>